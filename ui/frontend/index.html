<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document Portal</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    input, button { margin: 5px; padding: 5px; }
    pre { background: #f4f4f4; padding: 10px; white-space: pre-wrap; }
    h3 { margin-top: 30px; }
  </style>
</head>
<body>
  <h2>Document Portal</h2>

  <!-- Ingest Section -->
  <div>
    <h3>Ingest & Analyze Document</h3>
    <input id="docLoc" type="text" placeholder="Doc location (S3 path)" size="50">
    <button onclick="callIngestAPI()">Ingest</button>
    <div id="ingestResult"></div>
  </div>

  <!-- Compare Section -->
  <div>
    <h3>Compare Documents</h3>
    <input id="doc1" type="text" placeholder="Document 1 (S3 path)" size="50">
    <input id="doc2" type="text" placeholder="Document 2 (S3 path)" size="50">
    <button onclick="callCompareAPI()">Compare</button>
    <div id="compareResult"></div>
  </div>

  <script>
    const API_URL = "https://your-api-gateway-id.execute-api.ap-south-1.amazonaws.com/prod"; 
    // Replace with your API Gateway URL

    async function callIngestAPI() {
      const payload = {
        session_id: "session_123",
        user_id: "user_1",
        doc_loc: document.getElementById("docLoc").value,
        ingest_source: "ui",
        source_path: "user_given"
      };

      try {
        const res = await fetch(`${API_URL}/ingest_data`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
        });
        const data = await res.json();
        document.getElementById("ingestResult").innerHTML =
          "<pre>" + JSON.stringify(data, null, 2) + "</pre>";
      } catch (err) {
        document.getElementById("ingestResult").innerHTML = "Error: " + err.message;
      }
    }

    async function callCompareAPI() {
      const payload = {
        document_1: document.getElementById("doc1").value,
        document_2: document.getElementById("doc2").value
      };

      try {
        const res = await fetch(`${API_URL}/doc_compare`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
        });
        const data = await res.json();
        document.getElementById("compareResult").innerHTML =
          "<pre>" + JSON.stringify(data, null, 2) + "</pre>";
      } catch (err) {
        document.getElementById("compareResult").innerHTML = "Error: " + err.message;
      }
    }
  </script>
</body>
</html>
